<?php
// Set Meta Tags
$this->set('title', 'Playground | Map API Testing');
$this->set('metaDescription', 'Map API Testing - Playground');
$this->set('ogUrl', DOMAIN . '/maps/playground'); // TODO: Change to the current page URL

$mapDomain = $this->Url->build('/', ['fullBase' => true]); // e.g. https://www.archerexteriors.com/
?>

<style>
    /* Map container styles */
    .mapapi-app {
        margin-bottom: 30px;
        background-color: #f5f5f5;
        border-radius: 8px;
        overflow: hidden;
    }

    .map-error {
        padding: 20px;
        color: #721c24;
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        border-radius: 4px;
        text-align: center;
    }

    /* Loading state styles */
    .mapapi-app:not([class*="map-loaded-"]) {
        position: relative;
        min-height: 300px;
    }

    .mapapi-app:not([class*="map-loaded-"])::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(245, 245, 245, 0.9);
        z-index: 1;
    }

    .mapapi-app:not([class*="map-loaded-"])::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        z-index: 2;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% {
            transform: translate(-50%, -50%) rotate(0deg);
        }

        100% {
            transform: translate(-50%, -50%) rotate(360deg);
        }
    }
</style>

<div class="container">
    <h1 class="mb-4">Map API Testing Playground</h1>

    <!-- Map Container: Index -->
    <div class="mapapi-app" data-map-slug="index" data-map-domain="<?= h($mapDomain) ?>" data-mapapi-app-lazy data-height="1000px"></div>

    <!-- Map Container: Southern Jersey Counties -->
    <div class="mapapi-app" data-map-slug="southern-jersey-counties" data-map-domain="<?= h($mapDomain) ?>" data-mapapi-app-lazy data-height="500px"></div>

    <!-- Map Container: Northern Jersey Counties -->
    <div class="mapapi-app" data-map-slug="northern-jersey-counties" data-map-domain="<?= h($mapDomain) ?>" data-mapapi-app-lazy data-height="500px"></div>

    <!-- Map Container: Alabama Florida Counties -->
    <div class="mapapi-app" data-map-slug="alabama-florida-counties" data-map-domain="<?= h($mapDomain) ?>" data-mapapi-app-lazy data-height="500px"></div>

    <!-- Map Container: Lynn Haven Florida Counties -->
    <div class="mapapi-app" data-map-slug="lynn-haven-florida-counties" data-map-domain="<?= h($mapDomain) ?>" data-mapapi-app-lazy data-height="500px"></div>
</div>

<!-- Map Platform Script - Load once at the bottom -->
<script src="<?= $this->Url->build('/mapapi/platform.js', ['fullBase' => true]) ?>" async></script>